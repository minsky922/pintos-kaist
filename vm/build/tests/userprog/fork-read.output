Kernel command line: -q -f put fork-read put sample.txt run fork-read
0 ~ 9fc00 1
100000 ~ 13e0000 1
Pintos booting with: 
	base_mem: 0x0 ~ 0x9fc00 (Usable: 639 kB)
	ext_mem: 0x100000 ~ 0x13e0000 (Usable: 19,328 kB)
Calibrating timer...  157,081,600 loops/s.
hd0:0: detected 337 sector (168 kB) disk, model "QEMU HARDDISK", serial "QM00001"
hd0:1: detected 20,160 sector (9 MB) disk, model "QEMU HARDDISK", serial "QM00002"
hd1:0: detected 111 sector (55 kB) disk, model "QEMU HARDDISK", serial "QM00003"
hd1:1: detected 8,064 sector (3 MB) disk, model "QEMU HARDDISK", serial "QM00004"
Formatting file system...done.
Boot complete.
Putting 'fork-read' into the file system...
Putting 'sample.txt' into the file system...
Executing 'fork-read':
(fork-read) begin
(fork-read) open "sample.txt"
(fork-read) child run
(fork-read) Child: pintos is funny!
(fork-read) end
child: exit(0)
fork-read: exit(-1)
Kernel PANIC at ../../threads/palloc.c:321 in palloc_free_multiple(): assertion `bitmap_all (pool->used_map, page_idx, page_cnt)' failed.
Call stack: 0x800421843a 0x800420bd2e 0x800420bd7b 0x800420d0aa 0x800420d12d 0x800420d1b0 0x800420d279 0x800421c676 0x800421c5c7 0x800420757a 0x800421dab4 0x800421d38f 0x8004209212 0x8004209630 0x8004220742 0x800421f6c7 0x800421e08c 0x800421d6e3 0x800421d404fork-read: exit(-1)
Interrupt 0x0d (#GP General Protection Exception) at rip=800421f87c
 cr2=000000004747ff50 error=               0
rax cKernel PANIC recursion at ../../threads/thread.c:366 in thread_current().
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220a05
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004223c4d rdx 000000000000000e
rsp 0000008004244f70 rbp 0000008004244f80 rsi 00000000000000d7 rdi cccccccccccccccc
rip 0000008004220a05 r8 0000008004223c7a  r9 000000800421835f r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000002
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000017
rsp 0000008004244d60 rbp 0000008004244d70 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000020
rsp 0000008004244b50 rbp 0000008004244b60 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000029
rsp 0000008004244940 rbp 0000008004244950 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000032
rsp 0000008004244730 rbp 0000008004244740 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000003b
rsp 0000008004244520 rbp 0000008004244530 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000004
rsp 0000008004244310 rbp 0000008004244320 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000000d
rsp 0000008004244100 rbp 0000008004244110 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000016
rsp 0000008004243ef0 rbp 0000008004243f00 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000001f
rsp 0000008004243ce0 rbp 0000008004243cf0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000028
rsp 0000008004243ad0 rbp 0000008004243ae0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000031
rsp 00000080042438c0 rbp 00000080042438d0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000003a
rsp 00000080042436b0 rbp 00000080042436c0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000003
rsp 00000080042434a0 rbp 00000080042434b0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000000c
rsp 0000008004243290 rbp 00000080042432a0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000015
rsp 0000008004243080 rbp 0000008004243090 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000001e
rsp 0000008004242e70 rbp 0000008004242e80 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000027
rsp 0000008004242c60 rbp 0000008004242c70 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000030
rsp 0000008004242a50 rbp 0000008004242a60 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000039
rsp 0000008004242840 rbp 0000008004242850 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000002
rsp 0000008004242630 rbp 0000008004242640 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000000b
rsp 0000008004242420 rbp 0000008004242430 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000014
rsp 0000008004242210 rbp 0000008004242220 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000001d
rsp 0000008004242000 rbp 0000008004242010 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000026
rsp 0000008004241df0 rbp 0000008004241e00 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000002f
rsp 0000008004241be0 rbp 0000008004241bf0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000038
rsp 00000080042419d0 rbp 00000080042419e0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000001
rsp 00000080042417c0 rbp 00000080042417d0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000000a
rsp 00000080042415b0 rbp 00000080042415c0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=80042204eb
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000013
rsp 00000080042413a0 rbp 00000080042413b0 rsi 000000000000000a rdi cccccccccccccccc
rip 00000080042204eb r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
