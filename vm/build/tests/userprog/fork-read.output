Kernel command line: -q -f put fork-read put sample.txt run fork-read
0 ~ 9fc00 1
100000 ~ 13e0000 1
Pintos booting with: 
	base_mem: 0x0 ~ 0x9fc00 (Usable: 639 kB)
	ext_mem: 0x100000 ~ 0x13e0000 (Usable: 19,328 kB)
Calibrating timer...  130,867,200 loops/s.
hd0:0: detected 337 sector (168 kB) disk, model "QEMU HARDDISK", serial "QM00001"
hd0:1: detected 20,160 sector (9 MB) disk, model "QEMU HARDDISK", serial "QM00002"
hd1:0: detected 112 sector (56 kB) disk, model "QEMU HARDDISK", serial "QM00003"
hd1:1: detected 8,064 sector (3 MB) disk, model "QEMU HARDDISK", serial "QM00004"
Formatting file system...done.
Boot complete.
Putting 'fork-read' into the file system...
Putting 'sample.txt' into the file system...
Executing 'fork-read':
(fork-read) begin
(fork-read) open "sample.txt"
fork-read buffer: 0x605f45
fork-read byte_cnt: 20
(fork-read) child run
memcpy start
memcpy end
(fork-read) Child: pintos is funny!
close start
close end
(fork-read) end
child: exit(0)
fork-read: exit(-1)
Kernel PANIC at ../../threads/palloc.c:321 in palloc_free_multiple(): assertion `bitmap_all (pool->used_map, page_idx, page_cnt)' failed.
Call stack: 0x800421843a 0x800420bd2e 0x800420bd7b 0x800420d0aa 0x800420d12d 0x800420d1b0 0x800420d279 0x800421c676 0x800421c5c7 0x800420757a 0x800421dab4 0x800421d38f 0x8004209212 0x8004209630 0x800422075a 0x800421f6df 0x800421e0a4 0x800421d6e3 0x800421d404fork-read: exit(-1)
Interrupt 0x0d (#GP General Protection Exception) at rip=800421f894
 cr2=000000004747ff50 error=               0
Kernel PANIC recursion at ../../threads/thread.c:366 in thread_current().
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220a1d
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004223c4d rdx 0000000000000029
rsp 0000008004245020 rbp 0000008004245030 rsi 00000000000000d7 rdi cccccccccccccccc
rip 0000008004220a1d r8 0000008004223c7a  r9 000000800421835f r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000002
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000032
rsp 0000008004244e10 rbp 0000008004244e20 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000003b
rsp 0000008004244c00 rbp 0000008004244c10 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000004
rsp 00000080042449f0 rbp 0000008004244a00 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000000d
rsp 00000080042447e0 rbp 00000080042447f0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000016
rsp 00000080042445d0 rbp 00000080042445e0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000001f
rsp 00000080042443c0 rbp 00000080042443d0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000028
rsp 00000080042441b0 rbp 00000080042441c0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000031
rsp 0000008004243fa0 rbp 0000008004243fb0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000003a
rsp 0000008004243d90 rbp 0000008004243da0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000003
rsp 0000008004243b80 rbp 0000008004243b90 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000000c
rsp 0000008004243970 rbp 0000008004243980 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000015
rsp 0000008004243760 rbp 0000008004243770 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000001e
rsp 0000008004243550 rbp 0000008004243560 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000027
rsp 0000008004243340 rbp 0000008004243350 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000030
rsp 0000008004243130 rbp 0000008004243140 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000039
rsp 0000008004242f20 rbp 0000008004242f30 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000002
rsp 0000008004242d10 rbp 0000008004242d20 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000000b
rsp 0000008004242b00 rbp 0000008004242b10 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000014
rsp 00000080042428f0 rbp 0000008004242900 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000001d
rsp 00000080042426e0 rbp 00000080042426f0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000026
rsp 00000080042424d0 rbp 00000080042424e0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000002f
rsp 00000080042422c0 rbp 00000080042422d0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000038
rsp 00000080042420b0 rbp 00000080042420c0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000001
rsp 0000008004241ea0 rbp 0000008004241eb0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000000a
rsp 0000008004241c90 rbp 0000008004241ca0 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000013
rsp 0000008004241a80 rbp 0000008004241a90 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000001c
rsp 0000008004241870 rbp 0000008004241880 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 0000000000000025
rsp 0000008004241660 rbp 0000008004241670 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
Interrupt 0x0d (#GP General Protection Exception) at rip=8004220503
 cr2=000000004747ff50 error=               0
rax cccccccccccccccc rbx 000000004747ff00 rcx 0000008004227cd8 rdx 000000000000002e
rsp 0000008004241450 rbp 0000008004241460 rsi 000000000000000a rdi cccccccccccccccc
rip 0000008004220503 r8 000000800421835f  r9 000000800421b8b3 r10 0000000000000000
r11 0000000000000206 r12 000000800421d50f r13 0000000000000002 r14 0000008004245eb0
r15 0000000000000002 rflags 00000086
es: 0010 ds: 0010 cs: 0008 ss: 0010
